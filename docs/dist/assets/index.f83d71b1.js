var eo=Object.defineProperty,to=Object.defineProperties;var no=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var lo=Object.prototype.hasOwnProperty,ro=Object.prototype.propertyIsEnumerable;var A=(o,t,e)=>t in o?eo(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,p=(o,t)=>{for(var e in t||(t={}))lo.call(t,e)&&A(o,e,t[e]);if(T)for(var e of T(t))ro.call(t,e)&&A(o,e,t[e]);return o},C=(o,t)=>to(o,no(t));import{d as j,e as R,E as V,t as $,o as k,c as O,k as L,v as q,b as so,j as ao,q as uo,Q as io,R as G,S as z,T as co,U as fo,V as po,W as mo,X as bo,Y as Eo,Z as U,_ as W,$ as ko,a0 as go,a1 as yo,a2 as ho,a3 as Bo,a4 as wo,a5 as Co,a6 as Ro,a7 as Po,a8 as vo,a9 as _o,aa as So,ab as Fo,p as m,F as M,f as g,ac as jo,ad as h,h as B,ae as Oo,af as Mo,ag as Io,ah as Do,ai as To,aj as Ao,x as Vo,r as $o,y as Lo,w,s as J,G as qo,g as P,A as _,B as S}from"./vendor.6860d02d.js";import{_ as N}from"./plugin-vue_export-helper.21dcd24c.js";const Q=(o,t)=>{if(o.install=e=>{for(const n of[o,...Object.values(t!=null?t:{})])e.component(n.name,n)},t)for(const[e,n]of Object.entries(t))o[e]=n;return o},F=Object.assign;function Go(o){return o!=null}function zo(o){return Go(o)&&typeof o.then=="function"&&typeof o.catch=="function"}const X=(o,t)=>{if(o===t)return!0;if(typeof o=="object"&&o!=null&&typeof t=="object"&&t!=null){if(Object.keys(o).length!==Object.keys(t).length)return!1;for(var e in o)if(t.hasOwnProperty(e)){if(!X(o[e],t[e]))return!1}else return!1;return!0}else return!1},Y=o=>({type:String,default:o}),Uo=["click","loadingChange"],Wo=F({},{type:Y("default"),loading:Boolean});const Jo=j({name:"nfeButton",props:Wo,emits:Uo,setup(o,{emit:t}){const e=R(()=>`nfe-button-${o.type}`),n=u=>{o.loading||t("click",u)},r=R(()=>{if(o.loading)return"cursor-not-allowed"});return V(()=>o.loading,()=>{t("loadingChange",o.loading)}),C(p({buttonLoading:r,handleClick:n},$(o)),{buttonType:e})}}),No={class:"nfe-button-loading"};function Qo(o,t,e,n,r,u){return k(),O("button",{class:uo(["nfe-button",[o.buttonType,o.buttonLoading]]),onClick:t[0]||(t[0]=io(a=>o.handleClick(a),["stop"]))},[L(so("div",No,"loading",512),[[q,o.loading]]),ao(o.$slots,"default",{},void 0,!0)],2)}var Xo=N(Jo,[["render",Qo],["__scopeId","data-v-fd3103ea"]]),Re=Q(Xo);const Yo=["register","reset","submit","cancel","reset"],Zo=F({},{type:Y("default"),showSubmitButton:Boolean,showResetButton:Boolean,showCancelButton:Boolean}),Ho=(o="center")=>({left:{align:"middle",justify:"start"},center:{align:"middle",justify:"center"},right:{align:"middle",justify:"end"}})[o];var Ko=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",ElInput:G,ElFormItem:z,ElTooltip:co,ElIcon:fo,ElAutocomplete:po,ElCol:mo,ElInputNumber:bo,ElSelect:Eo,ElOption:U,ElRadio:W,ElRadioGroup:ko,ElColorPicker:go,ElCheckboxGroup:yo,ElRate:ho,ElSlider:Bo,ElSwitch:wo,ElUpload:Co,ElTransfer:Ro,ElCascader:Po,ElDatePicker:vo,ElTimePicker:_o,ElSelectV2:So,ElTimeSelect:Fo});const xo={schema:{type:Object,default:()=>{}},slots:{type:Object,default:()=>{}},colProps:{type:Object,default:()=>{}},formModel:{type:Object,default:()=>{}}};var v;(function(o){o.formItemTop="formItemTop",o.formItemBottom="formItemBottom",o.componentBottom="componentBottom",o.componentTop="componentTop",o.labelLeft="labelLeft",o.labelRight="labelRight",o.wrapAppend="wrapAppend",o.wrapBefore="wrapBefore"})(v||(v={}));const I=o=>{let t=o.options;if(!t)return console.warn(`${o.label}{props:${o.prop}}\uFF0C\u7F3A\u5C11options\u9009\u9879`),[];if(typeof t=="function"){const e=t();return zo(e)?(e.then(n=>o.options=n),[]):e}return t},D=o=>{let t=I(o),e=[];const n=r=>{if(o.fieldObj)for(let u in o.fieldObj)r[u]&&(r[o.fieldObj[u]]=r[u])};return{map:function(r){return e=t.map(u=>(n(u),r(u))),e}}},oe=(o={},t)=>{const e={Select(){const n=D(t).map(r=>B(U,{key:r.key,value:r.value,label:r.label}));o.default=()=>B("div",n)},RadioGroup(){const n=t.isRadioButton?Oo:W,r=D(t).map(u=>B(n,C(p({},u),{label:u.value}),{default:()=>B("span",u.label)}));o.default=()=>r},CheckboxGroup(){const n=t.isCheckBoxButton?Mo:Io,r=D(t).map(u=>B(n,C(p({},u),{label:u.value}),{default:()=>B("span",u.label)}));o.default=()=>r}};return e[t.component]&&e[t.component](),o},Z=(o,t)=>{if(!o)return{};o=h(o);for(let e in o){const n=o[e];if(n&&typeof n!="function"){if(!t[n]){console.warn(`\u8BF7\u68C0\u67E5\u60A8\u662F\u5426\u5728\u6A21\u677F\u4E2D\u5B9A\u4E49${n}\u63D2\u69FD\u4E86`);break}o[e]=t[n]}}return o},ee=(o,t)=>oe(Z(o.componentSlot,t),o),te=(o,t)=>Z(o.customSlot,t),ne=(o,t,e)=>{const n=(a,{slots:c})=>Object.keys(v).map(d=>{var E;return(E=c[v[d]])==null?void 0:E.call(c,e)}),r=te(o,t);let u={};return Object.keys(v).forEach(a=>{let c=v[a];u[c]=()=>{const d={[c]:r[c]};return r[c]?m(n,null,d):""}}),u},le=(o,t,e)=>({label:()=>{const n="margin-left:4px;margin-top:4px;cursor: pointer;position: relative;top:2px;",r=()=>o.tip?m(g("el-tooltip"),{content:o.tip,placement:"top"},{default:()=>[m(g("el-icon"),{size:16,style:n},{default:()=>[m(jo,null,null)]})]}):"";return m(M,null,[t(),m("span",null,[o.label]),r(),e()])}}),H={Autocomplete(o){const t=o.api;o.fetchSuggestions=async(e,n)=>{const r=await t(e);if(o.field){const u=o.fieldObj;r.forEach(a=>{for(let c in a)u[c]&&(a[u[c]]=a[c])})}n(r)}},Radio(o){o.component="RadioGroup"},Checkbox(o){o.component="CheckboxGroup"},Cascader(o){o.options=I(o)},DatePicker(o){o.defaultValue||(o.defaultValue=new Date),o.type||(o.type="date")},SelectV2(o){o.options=I(o)},TimePicker(o){o.defaultValue||(o.defaultValue=new Date)}},re=o=>{const t="api,styleProps,field,colProps,componentSlot".split(","),e=p({},o);return Object.keys(o).forEach(n=>{t.includes(n)&&delete e[n]}),e};var se=j({components:Ko,props:xo,setup(o,{emit:t}){let{schema:e,slots:n,formModel:r}=o;e.component&&H[e.component]&&H[e.component](e);const u=p(p({},o.colProps),e.colProps),a=R(()=>e.ifShow?e.ifShow(r):!0),c=()=>{if(!e.component)return"";const x=g("El"+e.component);return B(x,C(p({modelValue:e.value,"onUpdate:modelValue":oo=>e.value=oo},re(e)),{style:e.styleProps}),p({},ee(e,n)))},{componentBottom:d,formItemTop:E,formItemBottom:y,labelLeft:s,labelRight:l,wrapAppend:i,wrapBefore:f,componentTop:K}=ne(e,n,r);return()=>m(M,null,[f(),L(m(g("el-col"),u,{default:()=>[E(),m(g("el-form-item"),{labelWidth:e.labelWidth,prop:e.prop},p({default:()=>[K(),c(),d()]},le(e,s,l))),y()]}),[[q,a.value]]),i()])}});const ae="https://cdn.nucarf.cn/common/v1.0/js/mock-min.js";let b=null;function ue(){var e;(e=ie())==null||e.then(()=>{b=window.Mock,fe()});const o=n=>{requestAnimationFrame(()=>{b?n():o(n)})};return C(p({},{getTyperData(n){return new Promise(r=>{o(()=>{r(b.mock(n))})})},getRulesData(n){return new Promise(r=>{o(()=>{r(b.mock(n))})})},getMock(){return b.Random}}),{Mock:b})}function ie(){if(b)return;const o=document.createElement("script");return o.src=ae,document.body.appendChild(o),new Promise((t,e)=>{o.onload=()=>{t("\u52A0\u8F7D\u5B8C\u6210")},o.onerror=n=>{e(n)}})}const ce={constellation:function(){let o=["\u767D\u7F8A\u5EA7","\u91D1\u725B\u5EA7","\u53CC\u5B50\u5EA7","\u5DE8\u87F9\u5EA7","\u72EE\u5B50\u5EA7","\u5904\u5973\u5EA7","\u5929\u79E4\u5EA7","\u5929\u874E\u5EA7","\u5C04\u624B\u5EA7","\u6469\u7FAF\u5EA7","\u6C34\u74F6\u5EA7","\u53CC\u9C7C\u5EA7"];return b.Random.pick(o)},mobile:function(){var o=["132","135","189"];return b.Random.pick(o)+b.mock(/\d{8}/)}};function fe(){b.Random.extend(p({},ce))}function pe(o){let t={};return o.forEach(e=>{let n={required:!0,message:e.placeholder||""};e.rules&&(t[e.prop]=e.rules),e.required&&e.rules?t[e.prop].push(n):e.required&&(t[e.prop]=[n])}),t}const de=j({name:"nfeForm",props:Zo,emits:Yo,components:{FormItems:se,ElForm:Do,ElFormItem:z,ElRow:To,ElInput:G,ElButton:Ao},setup(o,{emit:t,slots:e}){const n=Vo(),{getRulesData:r,getTyperData:u}=ue(),a=$o({formPropsRef:{},formModel:{},formItemSchema:R(()=>a.formPropsRef.formItems),showFootBtn:R(()=>{const{showCancelButton:s,showMockButton:l,showResetButton:i,showSubmitButton:f}=a.formPropsRef;return s||l||i||f}),isSubmitBtnLoading:!1,isMockBtnLoading:!1,menuFootButtonsDisabled:R(()=>{const{isSubmitBtnLoading:s,isMockBtnLoading:l}=a;return s||l}),formRules:{}});V(()=>a.formItemSchema,s=>{var i;console.count("formItemSchema watch"),(i=h(s))==null||i.forEach(f=>{a.formModel[f.prop]!==f.value&&(f.watchValue&&f.watchValue({newValue:f.value,oldValue:a.formModel[f.prop]}),a.formModel[f.prop]=f.value)});let l=pe(h(s));X(l,h(a.formRules))||(a.formRules=l)},{deep:!0});const c=s=>(l=!0)=>{a[s]=l},d=c("isSubmitBtnLoading"),E=c("isMockBtnLoading"),y={async setProps(s){F(a.formPropsRef,s)},async setFormItemProps(s){var l;(l=a.formPropsRef.formItems)==null||l.forEach(i=>{Object.keys(s).forEach(f=>{i.prop===f&&F(i,s[f])})})},async setFormItemOptions(s){var l;(l=a.formPropsRef.formItems)==null||l.forEach(i=>{Object.keys(s).forEach(f=>{i.prop===f&&(i.options=s[f])})})},async setFormItemValue(s){var l;(l=a.formItemSchema)==null||l.forEach(i=>{Object.keys(s).forEach(f=>{i.prop===f&&(i.value=s[i.prop])})})},async onSubmit(){var s;d(),(s=n.value)==null||s.validate(l=>{if(d(!1),l)t("submit",{formData:h(a.formModel),loading:d});else return console.log("error submit!"),!1})},getFormData(){return p({},h(a.formModel))},async onCancel(){t("cancel")},async onResetFields(){var s,l;(s=a.formItemSchema)==null||s.forEach(i=>{i.value=i.resetValue}),(l=n.value)==null||l.resetFields(),t("reset")},async onMock(){E();let s={};for(let l of a.formItemSchema)if(typeof l.mock=="function"&&(s[l.prop]=await l.mock(h(l))),l.mock&&typeof l.mock!="function"&&(l.mock.type||l.mock.rules)){const i=l.mock.type?await u(l.mock.type):await r(l.mock.rules);s[l.prop]=i}E(!1),y.setFormItemValue(s)}};return Lo(()=>{t("register",y)}),p(p({slots:e,ruleFormRef:n,menuButtonPosition:Ho},$(a)),y)}}),me={class:"nfe-form"},be=S("\u786E\u5B9A"),Ee=S("\u91CD\u7F6E"),ke=S("\u6A21\u62DF\u6570\u636E"),ge=S("\u53D6\u6D88");function ye(o,t,e,n,r,u){const a=g("FormItems"),c=g("el-row"),d=g("el-button"),E=g("el-form");return k(),O("div",me,[m(E,J({ref:"ruleFormRef"},o.formPropsRef,{model:o.formModel,rules:o.formRules}),{default:w(()=>{var y;return[m(c,{gutter:o.formPropsRef.gutter},{default:w(()=>[(k(!0),O(M,null,qo(o.formItemSchema,s=>(k(),P(a,{key:s.prop,schema:s,slots:o.$slots,colProps:o.formPropsRef.colProps,formModel:o.formModel},null,8,["schema","slots","colProps","formModel"]))),128))]),_:1},8,["gutter"]),o.showFootBtn?(k(),P(c,J({key:0,span:24},o.menuButtonPosition((y=o.formPropsRef.menuBtnProps)==null?void 0:y.position)),{default:w(()=>[o.formPropsRef.showSubmitButton?(k(),P(d,{key:0,type:"primary",loading:o.isSubmitBtnLoading,disabled:o.menuFootButtonsDisabled,onClick:o.onSubmit},{default:w(()=>[be]),_:1},8,["loading","disabled","onClick"])):_("",!0),o.formPropsRef.showResetButton?(k(),P(d,{key:1,disabled:o.menuFootButtonsDisabled,onClick:o.onResetFields},{default:w(()=>[Ee]),_:1},8,["disabled","onClick"])):_("",!0),o.formPropsRef.showMockButton?(k(),P(d,{key:2,type:"primary",disabled:o.menuFootButtonsDisabled,loading:o.isMockBtnLoading,onClick:o.onMock},{default:w(()=>[ke]),_:1},8,["disabled","loading","onClick"])):_("",!0),o.formPropsRef.showCancelButton?(k(),P(d,{key:3,disabled:o.menuFootButtonsDisabled,onClick:o.onCancel},{default:w(()=>[ge]),_:1},8,["disabled","onClick"])):_("",!0)]),_:1},16)):_("",!0)]}),_:1},16,["model","rules"])])}var he=N(de,[["render",ye],["__scopeId","data-v-3583efa6"]]),Pe=Q(he);export{Re as a,Pe as n,ue as u};
