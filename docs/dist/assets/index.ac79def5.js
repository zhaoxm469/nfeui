var oo=Object.defineProperty,eo=Object.defineProperties;var to=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var no=Object.prototype.hasOwnProperty,lo=Object.prototype.propertyIsEnumerable;var M=(o,t,e)=>t in o?oo(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,f=(o,t)=>{for(var e in t||(t={}))no.call(t,e)&&M(o,e,t[e]);if(j)for(var e of j(t))lo.call(t,e)&&M(o,e,t[e]);return o},h=(o,t)=>eo(o,to(t));import{d as S,e as R,E as A,t as D,o as E,c as _,k as T,v as V,b as ro,j as so,q as ao,O as uo,P as $,Q as L,R as co,S as io,T as po,U as fo,V as mo,W as Eo,X as q,Y as G,Z as bo,_ as ko,$ as yo,a0 as go,a1 as ho,a2 as Co,a3 as wo,a4 as Ro,a5 as Bo,a6 as Po,a7 as vo,a8 as So,a9 as _o,p as d,F as O,f as b,aa as Oo,ab as k,h as y,ac as Fo,ad as Io,ae as jo,af as Mo,ag as Ao,ah as Do,x as To,r as Vo,y as $o,w as g,s as z,ai as Lo,G as qo,g as C,A as B,B as P}from"./vendor.2e71880e.js";import{_ as U}from"./plugin-vue_export-helper.21dcd24c.js";const W=(o,t)=>{if(o.install=e=>{for(const n of[o,...Object.values(t!=null?t:{})])e.component(n.name,n)},t)for(const[e,n]of Object.entries(t))o[e]=n;return o},v=Object.assign;function Go(o){return o!=null}function zo(o){return Go(o)&&typeof o.then=="function"&&typeof o.catch=="function"}const J=o=>({type:String,default:o}),Uo=["click","loadingChange"],Wo=v({},{type:J("default"),loading:Boolean});const Jo=S({name:"nfeButton",props:Wo,emits:Uo,setup(o,{emit:t}){const e=R(()=>`nfe-button-${o.type}`),n=u=>{o.loading||t("click",u)},s=R(()=>{if(o.loading)return"cursor-not-allowed"});return A(()=>o.loading,()=>{t("loadingChange",o.loading)}),h(f({buttonLoading:s,handleClick:n},D(o)),{buttonType:e})}}),No={class:"nfe-button-loading"};function Qo(o,t,e,n,s,u){return E(),_("button",{class:ao(["nfe-button",[o.buttonType,o.buttonLoading]]),onClick:t[0]||(t[0]=uo(a=>o.handleClick(a),["stop"]))},[T(ro("div",No,"loading",512),[[V,o.loading]]),so(o.$slots,"default",{},void 0,!0)],2)}var Xo=U(Jo,[["render",Qo],["__scopeId","data-v-fd3103ea"]]),Be=W(Xo);const Yo=["register","reset","submit","cancel","reset"],Zo=v({},{type:J("default"),showSubmitButton:Boolean,showResetButton:Boolean,showCancelButton:Boolean}),Ho=(o="center")=>({left:{align:"middle",justify:"start"},center:{align:"middle",justify:"center"},right:{align:"middle",justify:"end"}})[o];var Ko=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",ElInput:$,ElFormItem:L,ElTooltip:co,ElIcon:io,ElAutocomplete:po,ElCol:fo,ElInputNumber:mo,ElSelect:Eo,ElOption:q,ElRadio:G,ElRadioGroup:bo,ElColorPicker:ko,ElCheckboxGroup:yo,ElRate:go,ElSlider:ho,ElSwitch:Co,ElUpload:wo,ElTransfer:Ro,ElCascader:Bo,ElDatePicker:Po,ElTimePicker:vo,ElSelectV2:So,ElTimeSelect:_o});const xo={schema:{type:Object,default:()=>{}},slots:{type:Object,default:()=>{}},colProps:{type:Object,default:()=>{}},formModel:{type:Object,default:()=>{}}};var w;(function(o){o.formItemTop="formItemTop",o.formItemBottom="formItemBottom",o.componentBottom="componentBottom",o.componentTop="componentTop",o.labelLeft="labelLeft",o.labelRight="labelRight",o.wrapAppend="wrapAppend",o.wrapBefore="wrapBefore"})(w||(w={}));const F=o=>{let t=o.options;if(!t)return console.warn(`${o.label}{props:${o.prop}}\uFF0C\u7F3A\u5C11options\u9009\u9879`),[];if(typeof t=="function"){const e=t();return zo(e)?(e.then(n=>o.options=n),[]):e}return t},I=o=>{let t=F(o),e=[];const n=s=>{if(o.fieldObj)for(let u in o.fieldObj)s[u]&&(s[o.fieldObj[u]]=s[u])};return{map:function(s){return e=t.map(u=>(n(u),s(u))),e}}},oe=(o={},t)=>{const e={Select(){const n=I(t).map(s=>y(q,{key:s.key,value:s.value,label:s.label}));o.default=()=>y("div",n)},RadioGroup(){const n=t.isRadioButton?Fo:G,s=I(t).map(u=>y(n,h(f({},u),{label:u.value}),{default:()=>y("span",u.label)}));o.default=()=>s},CheckboxGroup(){const n=t.isCheckBoxButton?Io:jo,s=I(t).map(u=>y(n,h(f({},u),{label:u.value}),{default:()=>y("span",u.label)}));o.default=()=>s}};return e[t.component]&&e[t.component](),o},N=(o,t)=>{if(!o)return{};o=k(o);for(let e in o){const n=o[e];if(n&&typeof n!="function"){if(!t[n]){console.warn(`\u8BF7\u68C0\u67E5\u60A8\u662F\u5426\u5728\u6A21\u677F\u4E2D\u5B9A\u4E49${n}\u63D2\u69FD\u4E86`);break}o[e]=t[n]}}return o},ee=(o,t)=>oe(N(o.componentSlot,t),o),te=(o,t)=>N(o.customSlot,t),ne=(o,t,e)=>{const n=(a,{slots:p})=>Object.keys(w).map(r=>{var l;return(l=p[w[r]])==null?void 0:l.call(p,e)}),s=te(o,t);let u={};return Object.keys(w).forEach(a=>{let p=w[a];u[p]=()=>{const r={[p]:s[p]};return s[p]?d(n,null,r):""}}),u},le=(o,t,e)=>({label:()=>{const n="margin-left:4px;margin-top:4px;cursor: pointer;position: relative;top:2px;",s=()=>o.tip?d(b("el-tooltip"),{content:o.tip,placement:"top"},{default:()=>[d(b("el-icon"),{size:16,style:n},{default:()=>[d(Oo,null,null)]})]}):"";return d(O,null,[t(),d("span",null,[o.label]),s(),e()])}}),Q={Autocomplete(o){const t=o.api;o.fetchSuggestions=async(e,n)=>{const s=await t(e);if(o.field){const u=o.fieldObj;s.forEach(a=>{for(let p in a)u[p]&&(a[u[p]]=a[p])})}n(s)}},Radio(o){o.component="RadioGroup"},Checkbox(o){o.component="CheckboxGroup"},Cascader(o){o.options=F(o)},DatePicker(o){o.defaultValue||(o.defaultValue=new Date),o.type||(o.type="date")},SelectV2(o){o.options=F(o)},TimePicker(o){o.defaultValue||(o.defaultValue=new Date)}},re=o=>{const t="api,styleProps,field,colProps,componentSlot".split(","),e=f({},o);return Object.keys(o).forEach(n=>{t.includes(n)&&delete e[n]}),e};var se=S({components:Ko,props:xo,setup(o,{emit:t}){let{schema:e,slots:n,formModel:s}=o;e.component&&Q[e.component]&&Q[e.component](e);const u=()=>{const K=b("El"+e.component);return y(K,h(f({modelValue:e.value,"onUpdate:modelValue":x=>e.value=x},re(e)),{style:e.styleProps}),f({},ee(e,n)))},{componentBottom:a,formItemTop:p,formItemBottom:r,labelLeft:l,labelRight:c,wrapAppend:i,wrapBefore:X,componentTop:Y}=ne(e,n,s),Z=f(f({},o.colProps),e.colProps),H=R(()=>e.ifShow?e.ifShow(s):!0);return()=>d(O,null,[X(),T(d(b("el-col"),Z,{default:()=>[p(),d(b("el-form-item"),{labelWidth:e.labelWidth,prop:e.prop},f({default:()=>[Y(),u(),a()]},le(e,l,c))),r()]}),[[V,H.value]]),i()])}});const ae="https://cdn.nucarf.cn/common/v1.0/js/mock-min.js";let m=null;function ue(){var e;(e=ce())==null||e.then(()=>{m=window.Mock,pe()});const o=n=>{requestAnimationFrame(()=>{m?n():o(n)})};return h(f({},{getTyperData(n){return new Promise(s=>{o(()=>{s(m.mock(n))})})},getRulesData(n){return new Promise(s=>{o(()=>{s(m.mock(n))})})},getMock(){return m.Random}}),{Mock:m})}function ce(){if(m)return;const o=document.createElement("script");return o.src=ae,document.body.appendChild(o),new Promise((t,e)=>{o.onload=()=>{t("\u52A0\u8F7D\u5B8C\u6210")},o.onerror=n=>{e(n)}})}const ie={constellation:function(){let o=["\u767D\u7F8A\u5EA7","\u91D1\u725B\u5EA7","\u53CC\u5B50\u5EA7","\u5DE8\u87F9\u5EA7","\u72EE\u5B50\u5EA7","\u5904\u5973\u5EA7","\u5929\u79E4\u5EA7","\u5929\u874E\u5EA7","\u5C04\u624B\u5EA7","\u6469\u7FAF\u5EA7","\u6C34\u74F6\u5EA7","\u53CC\u9C7C\u5EA7"];return m.Random.pick(o)},mobile:function(){var o=["132","135","189"];return m.Random.pick(o)+m.mock(/\d{8}/)}};function pe(){m.Random.extend(f({},ie))}function fe(o){let t={};return o.forEach(e=>{let n={required:!0,message:e.placeholder||""};e.rules&&(t[e.prop]=e.rules),e.required&&e.rules?t[e.prop].push(n):e.required&&(t[e.prop]=[n])}),t}const de=S({name:"nfeForm",props:Zo,emits:Yo,components:{FormItems:se,ElForm:Mo,ElFormItem:L,ElRow:Ao,ElInput:$,ElButton:Do},setup(o,{emit:t,slots:e}){const n=To(),{getRulesData:s,getTyperData:u}=ue(),a=Vo({formPropsRef:{},formModel:{},formItemSchema:R(()=>a.formPropsRef.formItems),showFootBtn:R(()=>{const{showCancelButton:r,showMockButton:l,showResetButton:c,showSubmitButton:i}=a.formPropsRef;return r||l||c||i}),isSubmitLoading:!1,formRules:{}});A(()=>a.formItemSchema,r=>{var c;console.count("formItemSchema watch"),(c=k(r))==null||c.forEach(i=>{a.formModel[i.prop]!==i.value&&(i.watchValue&&i.watchValue({newValue:i.value,oldValue:a.formModel[i.prop]}),a.formModel[i.prop]=i.value)});let l=fe(k(r));Lo(l,k(a.formRules))||(a.formRules=l)},{deep:!0});const p={async setProps(r){v(a.formPropsRef,r)},async setFormItemProps(r){var l;(l=a.formPropsRef.formItems)==null||l.forEach(c=>{Object.keys(r).forEach(i=>{c.prop===i&&v(c,r[i])})})},async setFormItemOptions(r){var l;(l=a.formPropsRef.formItems)==null||l.forEach(c=>{Object.keys(r).forEach(i=>{c.prop===i&&(c.options=r[i])})})},async setFormItemValue(r){var l;(l=a.formItemSchema)==null||l.forEach(c=>{Object.keys(r).forEach(i=>{c.prop===i&&(c.value=r[c.prop])})})},async onSubmit(){var l;const r=(c=!0)=>{a.isSubmitLoading=c};r(),(l=n.value)==null||l.validate(c=>{if(r(!1),c)t("submit",{formData:k(a.formModel),loading:r});else return console.log("error submit!"),!1})},getFormData(){return f({},k(a.formModel))},async onCancel(){t("cancel")},async onResetFields(){var r,l;(r=a.formItemSchema)==null||r.forEach(c=>{c.value=c.resetValue}),(l=n.value)==null||l.resetFields(),t("reset")},async onMock(){var r;(r=a.formItemSchema)==null||r.forEach(async l=>{if(typeof l.mock=="function")return l.value=await l.mock(k(l));if(l.mock&&typeof l.mock!="function"&&(l.mock.type||l.mock.rules)){const c=l.mock.type?await u(l.mock.type):await s(l.mock.rules);l.value=c}})}};return $o(()=>{t("register",p)}),f(f({slots:e,ruleFormRef:n,menuButtonPosition:Ho},D(a)),p)}}),me={class:"nfe-form"},Ee=P("\u786E\u5B9A"),be=P("\u91CD\u7F6E"),ke=P("\u6A21\u62DF\u6570\u636E"),ye=P("\u53D6\u6D88");function ge(o,t,e,n,s,u){const a=b("FormItems"),p=b("el-row"),r=b("el-button"),l=b("el-form");return E(),_("div",me,[d(l,z({ref:"ruleFormRef"},o.formPropsRef,{model:o.formModel,rules:o.formRules}),{default:g(()=>{var c;return[d(p,{gutter:o.formPropsRef.gutter},{default:g(()=>[(E(!0),_(O,null,qo(o.formItemSchema,i=>(E(),C(a,{key:i.prop,schema:i,slots:o.$slots,colProps:o.formPropsRef.colProps,formModel:o.formModel},null,8,["schema","slots","colProps","formModel"]))),128))]),_:1},8,["gutter"]),o.showFootBtn?(E(),C(p,z({key:0,span:24},o.menuButtonPosition((c=o.formPropsRef.menuBtnProps)==null?void 0:c.position)),{default:g(()=>[o.formPropsRef.showSubmitButton?(E(),C(r,{key:0,type:"primary",loading:o.isSubmitLoading,disabled:o.isSubmitLoading,onClick:o.onSubmit},{default:g(()=>[Ee]),_:1},8,["loading","disabled","onClick"])):B("",!0),o.formPropsRef.showResetButton?(E(),C(r,{key:1,disabled:o.isSubmitLoading,onClick:o.onResetFields},{default:g(()=>[be]),_:1},8,["disabled","onClick"])):B("",!0),o.formPropsRef.showMockButton?(E(),C(r,{key:2,type:"primary",disabled:o.isSubmitLoading,onClick:o.onMock},{default:g(()=>[ke]),_:1},8,["disabled","onClick"])):B("",!0),o.formPropsRef.showCancelButton?(E(),C(r,{key:3,disabled:o.isSubmitLoading,onClick:o.onCancel},{default:g(()=>[ye]),_:1},8,["disabled","onClick"])):B("",!0)]),_:1},16)):B("",!0)]}),_:1},16,["model","rules"])])}var he=U(de,[["render",ge],["__scopeId","data-v-04363082"]]),Pe=W(he);export{Be as a,Pe as n,ue as u};
