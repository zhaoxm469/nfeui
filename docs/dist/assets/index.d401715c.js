var G=Object.defineProperty,K=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var j=(o,t,e)=>t in o?G(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,f=(o,t)=>{for(var e in t||(t={}))X.call(t,e)&&j(o,e,t[e]);if(P)for(var e of P(t))Y.call(t,e)&&j(o,e,t[e]);return o},B=(o,t)=>K(o,Q(t));import{d as w,e as h,E as A,t as D,o as m,c as R,k as Z,v as H,b as N,j as x,q as oo,O as eo,p as i,F,f as d,P as to,Q as C,R as O,S as $,T as no,U as so,V as lo,W as ro,X as uo,Y as ao,Z as co,s as M,h as po,_ as io,$ as fo,a0 as mo,x as yo,r as bo,y as ko,w as b,G as go,g as k,A as _,B as E}from"./vendor.7c93676c.js";import{_ as I}from"./plugin-vue_export-helper.21dcd24c.js";const L=(o,t)=>{if(o.install=e=>{for(const n of[o,...Object.values(t!=null?t:{})])e.component(n.name,n)},t)for(const[e,n]of Object.entries(t))o[e]=n;return o},T=Object.assign,V=o=>({type:String,default:o}),ho=["click","loadingChange"],_o=T({},{type:V("default"),loading:Boolean});const Co=w({name:"nfeButton",props:_o,emits:ho,setup(o,{emit:t}){const e=h(()=>`nfe-button-${o.type}`),n=c=>{o.loading||t("click",c)},a=h(()=>{if(o.loading)return"cursor-not-allowed"});return A(()=>o.loading,()=>{t("loadingChange",o.loading)}),B(f({buttonLoading:a,handleClick:n},D(o)),{buttonType:e})}}),Eo={class:"nfe-button-loading"};function vo(o,t,e,n,a,c){return m(),R("button",{class:oo(["nfe-button",[o.buttonType,o.buttonLoading]]),onClick:t[0]||(t[0]=eo(s=>o.handleClick(s),["stop"]))},[Z(N("div",Eo,"loading",512),[[H,o.loading]]),x(o.$slots,"default",{},void 0,!0)],2)}var Bo=I(Co,[["render",vo],["__scopeId","data-v-5639609d"]]),Zo=L(Bo);const wo=["register","reset","submit","cancel","reset"],Ro=T({},{type:V("default"),showSubmitButton:Boolean,showResetButton:Boolean,showCancelButton:Boolean});var g;(function(o){o.top="top",o.bottom="bottom",o.componentBottom="componentBottom",o.labelLeft="labelLeft",o.labelRight="labelRight",o.append="append",o.before="before"})(g||(g={}));const Fo=(o={},t)=>{const e={Select(){o.default=()=>{var n;return(n=t.options)==null?void 0:n.map(a=>{if(t.fieldObj)for(let c in t.fieldObj)a[c]&&(a[t.fieldObj[c]]=a[c]);return i(d("el-option"),{key:a.key,label:a.label,value:a.value},null)})}}};return e[t.component]&&e[t.component](),o},z=(o,t)=>{if(!o)return{};o=C(o);for(let e in o){const n=o[e];if(n&&typeof n!="function"){if(!t[n]){console.error(`\u8BF7\u68C0\u67E5\u60A8\u662F\u5426\u5728\u6A21\u677F\u4E2D\u5B9A\u4E49${n}\u63D2\u69FD\u4E86`);break}o[e]=()=>t[n]()}}return o},So=(o,t)=>Fo(z(o.componentSlot,t),o),Po=(o,t)=>z(o.customSlot,t),jo=(o,t)=>{const e=(c,{slots:s})=>Object.keys(g).map(p=>{var l;return(l=s[g[p]])==null?void 0:l.call(s)}),n=Po(o,t);let a={};return Object.keys(g).forEach(c=>{let s=g[c];a[s]=()=>{const p={[s]:n[s]};return n[s]?i(e,null,p):""}}),a},Ao=(o,t,e)=>({label:()=>{const n="margin-left:4px;margin-top:4px;cursor: pointer;position: relative;top:2px;",a=()=>o.tip?i(d("el-tooltip"),{content:o.tip,placement:"top"},{default:()=>[i(d("el-icon"),{size:16,style:n},{default:()=>[i(to,null,null)]})]}):"";return i(F,null,[t(),i("span",null,[o.label]),a(),e()])}}),W={Autocomplete(o){const t=o.api;o.fetchSuggestions=async(e,n)=>{const a=await t(e);if(o.field){const c=o.fieldObj;a.forEach(s=>{for(let p in s)c[p]&&(s[c[p]]=s[p])})}n(a)}}},Do=o=>{const t="api,styleProps,field,colProps,componentSlot".split(","),e=f({},o);return Object.keys(o).forEach(n=>{t.includes(n)&&delete e[n]}),e};var Oo=w({components:{ElFormItem:O,ElInput:$,ElAutocomplete:no,ElCol:so,ElTooltip:lo,ElIcon:ro,ElInputNumber:uo,ElSelect:ao,ElOption:co},props:{schema:{type:Object,default:()=>{}},slots:{type:Object,default:()=>{}}},setup(o,{emit:t}){var S;let{schema:e,slots:n}=o;const a=d("El"+e.component);e.component&&W[e.component]&&W[e.component](e);const c=()=>po(a,B(f({modelValue:e.value,"onUpdate:modelValue":U=>e.value=U},Do(e)),{style:e.styleProps}),f({},So(e,n))),{componentBottom:s,top:p,bottom:l,labelLeft:r,labelRight:u,append:v,before:q}=jo(e,n),J=((S=e.colProps)==null?void 0:S.row)?"display:flex":"";return()=>i(F,null,[q(),i(d("el-col"),M(e.colProps,{style:J}),{default:()=>[p(),i(d("el-form-item"),{labelWidth:e.labelWidth,prop:e.prop},f({default:()=>[c(),s()]},Ao(e,r,u))),l()]}),v()])}});const $o="https://cdn.nucarf.cn/common/v1.0/js/mock-min.js";let y=null;function Mo(){var t;(t=Io())==null||t.then(()=>{y=window.Mock,To()});const o={getTyperData(e){return y.mock(e)},getRulesData(e){return y.mock(e)}};return Object.keys(o).forEach(e=>{const n=o[e];o[e]=function(...a){if(!y.mock)throw"\u6CA1\u6709\u52A0\u8F7D\u6210\u529Fcdn\u7684mockjs \u5C31\u5F00\u59CB\u8C03\u7528\u65B9\u6CD5\uFF01";return n.apply(null,a)}}),f({},o)}function Io(){if(y)return;const o=document.createElement("script");return o.src=$o,document.body.appendChild(o),new Promise((t,e)=>{o.onload=()=>{t("\u52A0\u8F7D\u5B8C\u6210")},o.onerror=n=>{e(n)}})}const Lo={constellation:function(){let o=["\u767D\u7F8A\u5EA7","\u91D1\u725B\u5EA7","\u53CC\u5B50\u5EA7","\u5DE8\u87F9\u5EA7","\u72EE\u5B50\u5EA7","\u5904\u5973\u5EA7","\u5929\u79E4\u5EA7","\u5929\u874E\u5EA7","\u5C04\u624B\u5EA7","\u6469\u7FAF\u5EA7","\u6C34\u74F6\u5EA7","\u53CC\u9C7C\u5EA7"];return y.Random.pick(o)},mobile:function(){var o=["132","135","189"];return y.Random.pick(o)+y.mock(/\d{8}/)}};function To(){y.Random.extend(f({},Lo))}const Vo=w({name:"nfeForm",props:Ro,emits:wo,components:{FormItems:Oo,ElForm:io,ElFormItem:O,ElRow:fo,ElInput:$,ElButton:mo},setup(o,{emit:t,slots:e}){const n=yo(),{getRulesData:a,getTyperData:c}=Mo(),s=bo({formPropsRef:{},formModel:{},formItemSchema:h(()=>s.formPropsRef.formItems),showFootBtn:h(()=>{const{showCancelButton:l,showMockButton:r,showResetButton:u,showSubmitButton:v}=s.formPropsRef;return l||r||u||v}),rules:h(()=>{var r;let l={};return(r=s.formPropsRef.formItems)==null||r.forEach(u=>{u.rules&&(l[u.prop]=u.rules)}),l}),isSubmitLoading:!1});A(()=>s.formItemSchema,l=>{var r;(r=C(l))==null||r.forEach(u=>s.formModel[u.prop]=u.value||"")},{deep:!0});const p={async setProps(l){Object.assign(s.formPropsRef,l)},async onSubmit(){var r;const l=(u=!0)=>{s.isSubmitLoading=u};(r=n.value)==null||r.validate(u=>{if(u)t("submit",{formData:C(s.formModel),loading:l});else return console.log("error submit!"),!1})},getFormData(){return C(s.formModel)},async onCancel(){t("cancel")},async onResetFields(){var l,r;(l=n.value)==null||l.resetFields(),(r=s.formItemSchema)==null||r.forEach(u=>{typeof u.value=="number"&&u.component!=="Input"?u.value=0:u.value=""}),t("reset")},async onMock(){var l;(l=s.formItemSchema)==null||l.forEach(r=>{if(r.mock&&(r.mock.type||r.mock.rules)){const u=r.mock.type?c(r.mock.type):a(r.mock.rules);r.value=u}})},async setValue(l){var r;console.log(l),(r=s.formItemSchema)==null||r.forEach(u=>{l[u.prop]&&(u.value=l[u.prop])})}};return ko(()=>{t("register",p)}),f(f({slots:e,ruleFormRef:n},D(s)),p)}}),zo={class:"nfe-form"},Wo=E("\u786E\u5B9A"),qo=E("\u91CD\u7F6E"),Jo=E("\u6A21\u62DF\u6570\u636E"),Uo=E("\u53D6\u6D88");function Go(o,t,e,n,a,c){const s=d("FormItems"),p=d("el-row"),l=d("el-button"),r=d("el-form");return m(),R("div",zo,[i(r,M({ref:"ruleFormRef"},o.formPropsRef,{model:o.formModel,rules:o.rules}),{default:b(()=>[i(p,null,{default:b(()=>[(m(!0),R(F,null,go(o.formItemSchema,u=>(m(),k(s,{key:u.prop,schema:u,slots:o.$slots},null,8,["schema","slots"]))),128))]),_:1}),o.showFootBtn?(m(),k(p,{key:0,span:24,align:"middle",justify:"center"},{default:b(()=>[o.formPropsRef.showSubmitButton?(m(),k(l,{key:0,type:"primary",loading:o.isSubmitLoading,onClick:o.onSubmit},{default:b(()=>[Wo]),_:1},8,["loading","onClick"])):_("",!0),o.formPropsRef.showResetButton?(m(),k(l,{key:1,onClick:o.onResetFields},{default:b(()=>[qo]),_:1},8,["onClick"])):_("",!0),o.formPropsRef.showMockButton?(m(),k(l,{key:2,type:"primary",onClick:o.onMock},{default:b(()=>[Jo]),_:1},8,["onClick"])):_("",!0),o.formPropsRef.showCancelButton?(m(),k(l,{key:3,onClick:o.onCancel},{default:b(()=>[Uo]),_:1},8,["onClick"])):_("",!0)]),_:1})):_("",!0)]),_:1},16,["model","rules"])])}var Ko=I(Vo,[["render",Go],["__scopeId","data-v-f9ccf418"]]),Ho=L(Ko);export{Zo as a,Ho as n};
